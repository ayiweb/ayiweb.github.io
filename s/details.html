<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-M2XBSDLFQZ"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-M2XBSDLFQZ');
    </script>
  <!-- Balises méta pour les réseaux sociaux -->
  <meta property="og:title" content="Cours Anglais pour debutant">
  <meta property="og:description" content="Apprendre l'Anglais chaque jour et pratiquer avec nous gratuitement.">
  <meta property="og:image" content="/images/p formation.png" id="ogImage">
  <meta property="og:url" id="ogurl" content="">
  <meta name="keywords" content="Cours anglais, pratique anglais, grammaire anglais, expressions anglais .">

  <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-zruApR6S1gbL0OeSqjrFYseztvotdAyMBwK9aaVg6AeY3I4Wl9PrtQ/kOcvtO1PnwYFqxu3MNSXfs3lEpxdumQ==" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css">
  <link rel="stylesheet" href="/css/anglaisdetails.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/stylemobile.css">
  <script async src="https://www.googletagservices.com/tag/js/gpt.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7979799450178267"
     crossorigin="anonymous"></script>

     <title id="dynamicTitle"></title>
</head>
<body>

      <div class="container">
           <!--Configurztion de mon site web-->
           <section>
            <menu id="splash-screen"></menu>
            <menu id="menu"></menu>
            <div id="customDialog" class="alert"></div>
            <div class="formulaire"></div>
            <footer class="mobile-footer"></footer>
            <div class="placement">
                <div class="usersdetails" id="userDetails"></div>
            </div>
        </section>
         <!--Configurztion de mon site web-->
        <div class="content">
            <main>
                <!--Selectionner la langue de votre choix-->
    
                <div class="lang">
                    <select name="" id="langue">
                        <option value="fr" class="flag-fr" data-country="france" selected>Français</option>
                        <option value="us" class="flag-en" data-country="uk">Anglais</option>
                        <option value="es" class="flag-es" data-country="spain">Espagnol</option>
                    </select>
                    <span id="selected-flag" class="flag flag-icon flag-icon-fr"></span>
                    <span>Selectionnez votre langue</span>
                </div>
               
               
    
              <h1 id="details-title" style="display: none;">Loading...</h1>
              <div id="details-container" class="article">
                    
                    <h2 id="gtitle" style="display: none;"></h2>
                    <h1 id="stitre" class="stitre"></h1>
                    <p id="details"></p>
                    <div class="video" id="videoContainer"></div>
                    <a href="" id="imageshow"><img id="article-image" src="" alt=""></a>
                    <div class="btn">
                        <button> <i class="fa fa-youtube"></i></i> <a href="https://www.youtube.com/@unitechconseil509" id="youtube">Abonné a ma chaine youtube</a></button>
                        <p id="messages" style="display: none;">Accédez gratuitement en cliquant sur le lien suivant</p>
                        <p id="messages2" style="display: none;">Pour nous aider à travailler, veuillez partager ce lien dans au moins 5 groupes.</p>
                    </div>
                    
                    <script>
                        // Récupérer l'URL de l'image
                        var imageUrl = document.getElementById('article-image').src;
                    
                        // Mettre à jour le contenu de la balise meta avec l'URL de l'image
                        document.getElementById('ogurl').setAttribute('content', imageUrl);
                    </script>
                    <p id="message"></p>
                  <div class="pub">
                    <script type="text/javascript">
                        atOptions = {
                            'key' : '725f10caa5ef71a6ad624c5109b76c38',
                            'format' : 'iframe',
                            'height' : 50,
                            'width' : 320,
                            'params' : {}
                        };   document.write('<scr' + 'ipt type="text/javascript" src="//www.topcreativeformat.com/725f10caa5ef71a6ad624c5109b76c38/invoke.js"></scr' + 'ipt>');
                    </script>
                  </div>
    
    
                    <p id="desc"></p>
                    <p id="descEs"></p>
                    <p id="descEn"></p>
    
                    
                    <button style="display: none;" onclick="courSuivant()">Cours Suivant</button>
                    <!--Mes boutton-->
                    <div class="barlike">
                        <div class="barlike">
                            <div class="btncomment like">
                                <i class="fa fa-comment"></i>
                                <span class="count" id="commentcount"> 
                                </span>
                            </div>
                        
                            <div class="btnlike like">
                                <button onclick="likebtn()">
                                <i class="fa fa-thumbs-up"></i>
                                </button>
                                <span id="likecount"></span>
                            </div>
            
                            <div class="btndislike like">
                            <button onclick="dislikebtn()">
                                <i class="fa fa-thumbs-down"></i>
                            </button>
                            <span id="dislikecount"></span>
                            </div>
                            <button onclick="share()" class="share"><i class="fa fa-whatsapp"></i></button>
                           
                        </div>
                
                    </div>
              
                <!--espace commentaire-->
                <div class="commentSection">
    
                    <textarea id="comment" placeholder="Add a comment"></textarea>
                    <button onclick="addComment()">Add Comment</button>
                    <div class="comment" id="comments"></div>
                </div>
              </div>
           <div class="pub">
            <script type="text/javascript">
                atOptions = {
                    'key' : '725f10caa5ef71a6ad624c5109b76c38',
                    'format' : 'iframe',
                    'height' : 50,
                    'width' : 320,
                    'params' : {}
                };
                document.write('<scr' + 'ipt type="text/javascript" src="//www.topcreativeformat.com/725f10caa5ef71a6ad624c5109b76c38/invoke.js"></scr' + 'ipt>');
            </script>
           </div>
          </main>
            <aside></aside>
        </div>
      </div>


    <script>
        // Assurez-vous que le document est complètement chargé avant d'interagir avec les éléments
        document.addEventListener("DOMContentLoaded", function () {
    // Récupérez le paramètre "l" de l'URL
    const urlParams = new URLSearchParams(window.location.search);
    const title = urlParams.get('l');

    if (title) {
        // Remplacez les underscores par des espaces dans le titre
        const decodedTitle = decodeURIComponent(title.replace(/_/g, " "));

        // Mettez à jour le contenu de la balise de titre avec le titre décodé
        var titleElement = document.getElementById('dynamicTitle');
        if (titleElement) {
            titleElement.innerHTML = decodedTitle;
            console.log(decodedTitle);
        }

        // Récupérez l'élément de l'image par son identifiant
        var imgElement = document.getElementById("article-image");


        // Récupérez la balise meta par son identifiant
        var ogImageMeta = document.getElementById("ogImage");

        // Assurez-vous que l'élément de l'image et la balise meta existent
        if (imgElement && ogImageMeta) {
            // Récupérez l'URL de l'image
            var imgUrl = imgElement.src;
            console.log(imgUrl);

            // Mettez à jour le contenu de la balise meta avec l'URL de l'image
            ogImageMeta.setAttribute("content", imgUrl);
        }
    }
});


// Récupérez l'élément de l'image par son identifiant
var imgElement = document.getElementById("article-image");
        

        // Récupérez la balise meta par son identifiant
        var ogImageMeta = document.getElementById("ogImage");

        // Assurez-vous que l'élément de l'image et la balise meta existent
        if (imgElement && ogImageMeta) {
            // Récupérez l'URL de l'image
            var imgUrl = imgElement.src;
            console.log(imgUrl);

            // Mettez à jour le contenu de la balise meta avec l'URL de l'image
            ogImageMeta.setAttribute("content", imgUrl);
        }
    
    </script>
    
    

   <!-- The core Firebase JS SDK is always required and must be listed first -->
   <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
   <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-auth.js"></script>
   <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-database.js"></script>
 <!-- Scripts JavaScript -->
 <script src="/js/asset.js" defer></script>
 <script src="/js/script.js" defer></script>
 <script src="/js/menuFooter.js"></script>
 <script src="/js/button.js" defer></script>
  <script src="script/courscommentaire.js" defer></script>
  
  <!--<script src="/js/langue.js" defer></script>-->
  <script>
    const firebaseConfig = {
        apiKey: "AIzaSyCvqf6mNg-FsbcU7vZf52xEi6Skp9tz3yU",
    authDomain: "signup-286f7.firebaseapp.com",
    databaseURL: "https://signup-286f7-default-rtdb.firebaseio.com",
    projectId: "signup-286f7",
    storageBucket: "signup-286f7.appspot.com",
    messagingSenderId: "579225916993",
    appId: "1:579225916993:web:f4f70c8c24584a770018c0",
    measurementId: "G-RH5HF2F7DN"
    };

    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
 
    
    document.addEventListener("DOMContentLoaded", function() {
    // Sélectionner l'élément de langue
    var langueSelect = document.getElementById('langue');
    
    // Sélectionner la langue française par défaut
    var defaultLangue = 'fr';
    
    // Mettre à jour la langue sélectionnée dans la liste déroulante
    langueSelect.value = defaultLangue;
    
    // Déclencher manuellement l'événement onchange pour mettre à jour le contenu
    var event = new Event('change');
    langueSelect.dispatchEvent(event);
});


    const urlParams = new URLSearchParams(window.location.search);
const title = urlParams.get('l');
const titleWithoutUnderscores = title.replace(/_/g, " ");
const decodedTitle = decodeURIComponent(titleWithoutUnderscores);
console.log(decodedTitle);


 // Retrieve the stored title from localStorage
const storedTitle = localStorage.getItem('storedTitle');
console.log(storedTitle); // Outputs: Informatique

// Déclaration de variables en dehors de la fonction
var presentationKey;
var presentationData; // Déclaration de presentationData dans une portée plus large

// Référence à la base de données
var presentationsRef = database.ref('COURS/'+ storedTitle);

// Événement onchange pour la liste déroulante de la langue
document.getElementById('langue').onchange = function() {
    // Valeur sélectionnée dans la liste déroulante
    var selectedValue = this.value;

    // Récupération des données de présentation depuis la base de données Firebase
    presentationsRef.once('value', function(snapshot) {
        var presentationsData = snapshot.val();

        // Boucle à travers les données de présentation
        for (var currentKey in presentationsData) {
            presentationData = presentationsData[currentKey];
            document.getElementById('splash-screen').style.display = 'none';
            // Vérification si le titre correspond au titre décrypté
            if (presentationData.Title === decodedTitle) {
                // Récupération des éléments DOM
                var detailsTitle = document.getElementById('details-title');
                var h2 = document.getElementById('gtitle');
                var videoContainer = document.getElementById('videoContainer');
                var imageArticle = document.getElementById('article-image');
                var imageshow = document.getElementById('imageshow');
                var audio = document.getElementById('audio');
                var youtube = document.getElementById('youtube');
                var stitre = document.getElementById('stitre');
                var details = document.getElementById('details');
                var desc = document.getElementById('desc');
                var msgs = document.getElementById('messages');
                var msgs2 = document.getElementById('messages2');
                var ogImageMeta = document.getElementById('ogImage');

                // URL de base pour incorporer une vidéo YouTube
                var youtubeEmbedUrl = 'https://www.youtube.com/embed/';
                // Créer l'URL complète pour la vidéo YouTube
                var youtubeUrl = youtubeEmbedUrl + presentationData.VideoId + '?rel=0';

                // Mise à jour du contenu des éléments DOM
                detailsTitle.textContent = presentationData.Title;
                h2.textContent = presentationData.Title;
                var iframe = document.createElement('iframe');
                iframe.setAttribute('width', '560');
                iframe.setAttribute('height', '315');
                iframe.setAttribute('src', youtubeUrl);
                iframe.setAttribute('frameborder', '0');
                iframe.setAttribute('allowfullscreen', '');
                videoContainer.innerHTML = ''; // Effacer le contenu précédent
                videoContainer.appendChild(iframe);
                imageArticle.src = presentationData.Image;
                imageshow.href = presentationData.Image;
                //audio.href = presentationData.Audio;
                youtube.href = presentationData.VideoId;
                ogImageMeta.setAttribute('content', presentationData.Image);

                // Mise à jour du contenu en fonction de la langue sélectionnée
                switch (selectedValue) {
                    case 'us':
                        stitre.textContent = presentationData.Title || 'Pas encore disponible dans cette langue';
                        details.innerHTML = presentationData.enDetails || 'Pas encore disponible dans cette langue';
                        desc.innerHTML = presentationData.enDescription || 'Pas encore disponible dans cette langue';
                        msgs.textContent='Accede gratis haciendo clic en el siguiente enlace';
                        break;
                    case 'es':
                        stitre.textContent = presentationData.Title || 'Pas encore disponible dans cette langue';
                        details.innerHTML = presentationData.esDetails || 'Pas encore disponible dans cette langue';
                        desc.innerHTML = presentationData.esDescription || 'Pas encore disponible dans cette langue';
                        msgs.textContent='Accede gratis haciendo clic en el siguiente enlace';
                        msgs2.textContent='Para ayudarnos a trabajar, por favor comparte este enlace en al menos 5 grupos.';
                        break;
                    default:
                        stitre.textContent = presentationData.Title || 'Pas encore disponible dans cette langue';
                        details.innerHTML = presentationData.Details || 'Pas encore disponible dans cette langue';
                        desc.innerHTML = presentationData.Description || 'Pas encore disponible dans cette langue';
                        msgs.textContent='Accédez gratuitement en cliquant sur le lien suivant';
                        msgs2.textContent='Accédez gratuitement en cliquant sur le lien suivant';
                        break;
                }

                // Affichage de la section des commentaires
                document.querySelector('.commentSection').style.display = 'block';

                // Sortir de la boucle une fois que la correspondance est trouvée
                break;
            }
        }
    });
};



  </script>


<script>


function likebtn() {
    console.log(decodedTitle);
    var postRef = database.ref('COURS/' + storedTitle + '/' + decodedTitle);
    var likecount = document.getElementById('likecount');
    var dislikecount = document.getElementById('dislikecount');

    postRef.transaction(function (data) {
        if (data) {
            data.likes = (data.likes || 0) + 1;
        } else {
            data = { likes: 1, dislikes: 0 };
        }
        return data;
    }, function (error, committed, snapshot) {
        if (committed) {
            updateCounts(likecount, dislikecount, snapshot.val());
        } else {
            console.error('Transaction failed:', error);
        }
    });
}

function dislikebtn() {
    console.log(decodedTitle);
    var postRef = database.ref('COURS/' + storedTitle + '/' + decodedTitle);
    var likecount = document.getElementById('likecount');
    var dislikecount = document.getElementById('dislikecount');

    postRef.transaction(function (data) {
        if (data) {
            data.dislikes = (data.dislikes || 0) + 1;
        } else {
            data = { likes: 0, dislikes: 1 };
        }
        return data;
    }, function (error, committed, snapshot) {
        if (committed) {
            updateCounts(likecount, dislikecount, snapshot.val());
        } else {
            console.error('Transaction failed:', error);
        }
    });
}

function updateCounts(likeCountElement, dislikeCountElement, data) {
    console.log('Updating counts:', data);
    likeCountElement.innerText = data.likes || 0;
    dislikeCountElement.innerText = data.dislikes || 0;
}

// Ensure the elements exist
window.onload = function() {
    var likeCountElement = document.getElementById('likecount');
    var dislikeCountElement = document.getElementById('dislikecount');
    updateCounts(likeCountElement, dislikeCountElement, { likes: 0, dislikes: 0 });
};
 //----------------------fin button  like e dislike----------------------------------//
 </script>



<!--<div id="splash-screen" style="display: block;">
    <img src="/images/load.gif" alt="Splash Image">
</div>-->
</body>
</html>